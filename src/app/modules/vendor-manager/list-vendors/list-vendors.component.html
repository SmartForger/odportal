<div class="header-new pb-2">
  <h1>Vendor Manager</h1>
  <button mat-mini-fab color="primary" class="ml-2" (click)="showCreateModal()" *ngIf="canCreate" matTooltip="Add Vendor">
    <mat-icon>add_user</mat-icon>
  </button>
</div>
<div class="wrapper">
  <h2>Active Vendors</h2>

  <app-basic-string-filter [labelText]="'Filter by Vendor Name'" (searchUpdated)="applyFilter('name', $event)"></app-basic-string-filter>

  <div class="table-container">
    <table mat-table [dataSource]="items" class="table" matSort matSortActive="name" matSortDisableClear matSortDirection="asc">

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef disableClear width="60"></th>
        <td mat-cell *matCellDef="let vendor">
          <img *ngIf="vendor.logoImage" class="logoImage" [src]="fileBasePath + vendor.logoImage" />
          <mat-icon *ngIf="!vendor.logoImage" class="avatar">domain</mat-icon>
        </td>
      </ng-container>
        
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Vendor</th>
        <td mat-cell *matCellDef="let vendor">
          <a [routerLink]="['../edit', vendor.docId]" matTooltip="Edit Vendor">
            {{vendor.name}}
          </a>
        </td>
      </ng-container>

      <ng-container matColumnDef="phone">
        <th mat-header-cell *matHeaderCellDef>Phone</th>
        <td mat-cell *matCellDef="let vendor">
          <span *ngIf="vendor.pocPhone">{{vendor.pocPhone}}</span>
          <span *ngIf="!vendor.pocPhone" class="opacity-half">N/A</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let vendor">
          <span *ngIf="vendor.pocEmail">{{vendor.pocEmail}}</span>
          <span *ngIf="!vendor.pocEmail" class="opacity-half">N/A</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="users">
        <th mat-header-cell *matHeaderCellDef class="text-center">Users</th>
        <td mat-cell *matCellDef="let vendor" class="text-center">{{vendor.users.length}} <mat-icon class="sm-icon opacity-half">person</mat-icon></td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="text-right">&nbsp;</th>
        <td mat-cell *matCellDef="let vendor" class="text-right">
          <button mat-icon-button [routerLink]="['../edit', vendor.docId]" matTooltip="Edit Vendor">
            <mat-icon>edit</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row: columns: displayedColumns"></tr>

    </table>

    <mat-paginator [pageSize]="50"></mat-paginator>
  </div>

</div>