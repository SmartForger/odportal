<div class="table-container">

  <!-- <div class="table-controls">
    <mat-icon aria-hidden="false" class="icon-search">search</mat-icon>
    <input matInput placeholder="Search users" [ngModel]="search" (ngModelChange)='searchUpdated($event)' class="text-search" >
    <button mat-flat-button class="btn-create" (click)="onAddUserClick()">Create user</button>
  </div> -->

  <!-- <table class="table">
    <thead>
      <tr>
        <th>User</th>
        <th>Full Name</th>
        <th>Email</th>
        <th>&nbsp;</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users | stringFilter:'firstName,lastName,username,email':search">
        <td>
          <a [routerLink]="['../edit', user.id]" class="position-relative">
            <mat-icon class="avatar status-green float-left" style="margin-top:-7px;" *ngIf="user.enabled" matTooltip="User approved">person</mat-icon>
            <span>{{user.username}}</span>
          </a>
        </td>
        <td>
          {{user.firstName}} {{user.lastName}}
        </td>
        <td>
          <span *ngIf="user.email">{{user.email}}</span>
          <span *ngIf="!user.email" class="opacity-half">N/A</span>
        </td>
        <td class="text-right">
          <button mat-icon-button (click)="viewAttributes(user)" matTooltip="View Attributes" *ngIf="attributes">
            <mat-icon>work_outline</mat-icon>
          </button>
          <button mat-icon-button [routerLink]="['../edit', user.id]" matTooltip="Edit User">
            <mat-icon>edit</mat-icon>
          </button>
        </td>
      </tr>
    </tbody>
  </table> -->
  <app-listview-toolbar
    createButtonTitle="Create user"
    (create)="onAddUserClick()"
    (refresh)="listItems()"
    (search)="filterUsers($event)"
    searchPlaceholder="Search users"
  ></app-listview-toolbar>
  <table mat-table [dataSource]="displayItems" class="table" matSort matSortActive="username" matSortDisableClear matSortDirection="asc">

    <ng-container matColumnDef="username">
      <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Username</th>
      <td mat-cell *matCellDef="let user">
        <a [routerLink]="['../edit', user.id]" class="position-relative">
          <mat-icon class="avatar status-green float-left" style="margin-top:-7px;" *ngIf="user.enabled" matTooltip="User approved">person</mat-icon>
          <span matTooltip="Edit User">{{user.username}}</span>
        </a>
      </td>
    </ng-container>

    <ng-container matColumnDef="fullname">
      <th mat-header-cell *matHeaderCellDef>Full Name</th>
      <td mat-cell *matCellDef="let user">
        <span>{{user.firstName}} {{user.lastName}}</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>Email</th>
      <td mat-cell *matCellDef="let user">
        <span *ngIf="user.email">{{user.email}}</span>
        <span *ngIf="!user.email" class="opacity-half">N/A</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef class="text-right">&nbsp;</th>
      <td mat-cell *matCellDef="let user" class="text-right">
        <button mat-icon-button (click)="viewAttributes(user)" matTooltip="View Attributes" *ngIf="attributes">
          <mat-icon>work_outline</mat-icon>
        </button>
        <button mat-icon-button [routerLink]="['../edit', user.id]" matTooltip="Edit User">
          <mat-icon>edit</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row: columns: displayedColumns"></tr>

  </table>

  <mat-paginator [pageSize]="20"></mat-paginator>
</div>