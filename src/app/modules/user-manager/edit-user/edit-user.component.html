<div class="page-title-bg">
    <!-- <div class="icon-float-right" *ngIf="canUpdate"> -->
    <div class="icon-float-right">
        <div class="btn-group">
            <div data-toggle="dropdown">
                <button class="icon-primary-color icon-options"></button>
            </div>
            <ul class="dropdown-menu">
              <!-- <li *ngIf="!user?.enabled && canUpdate"> -->
              <li *ngIf="!user?.enabled">
                  <a (click)="enableButtonClicked(true)">
                <span class="icon-dropdown-li-settings icon-success-color icon-enabled"></span>
                <span class="dropdown-item">Enable User</span>
                </a>
            </li>
            <!-- <li *ngIf="user?.enabled && canUpdate"> -->
            <li *ngIf="user?.enabled">
                <a (click)="enableButtonClicked(false)">
                <span class="icon-dropdown-li-settings icon-disabled"></span>
                <span class="dropdown-item">Disable User</span> 
            </a>
            </li>
            <li class="divider"></li>
            <li *ngIf="canDelete">
                <a (click)="removeButtonClicked()">
                <span class="icon-dropdown-li-settings icon-trash"></span>
                <span class="dropdown-item">Delete User</span> 
                </a>
            </li>
        </ul>
    </div>
</div>
<app-card-title [cardTitle]="'Edit ' + user?.username" [cardSubtitle]="'Edit user details below.'"></app-card-title>
</div>

<div class="row">
    <div class="col-lg-12">
        <ul class="nav nav-pills horizontal-opendash">
            <li class="active">
                <a href="#basic" data-toggle="tab">Basic Information</a>
            </li>
            <li *ngIf="canUpdate">
                <a href="#password" data-toggle="tab">Password</a>
            </li>
            <li>
                <a href="#attributes" data-toggle="tab">Custom Attributes</a>
            </li>
            <li>
                <a href="#roles" data-toggle="tab">Role-Mappings</a>
            </li>
            <li>
                <a href="#apps" data-toggle="tab">MicroApps</a>
            </li>
        </ul>
        <div class="tab-content tab-content-rmf clearfix">
            <div id="basic" class="tab-pane active in">
                <app-edit-basic-info [allowSave]="canUpdate"></app-edit-basic-info>
            </div>
            <div id="password" class="tab-pane" *ngIf="canUpdate">
                <app-edit-password *ngIf="user" [activeUserId]="user.id"></app-edit-password>
            </div>
            <div id="attributes" class="tab-pane">
                <app-edit-attributes [canUpdate]="canUpdate" [user]="user"></app-edit-attributes>
            </div>
            <div id="roles" class="tab-pane">
                <app-edit-roles [canUpdate]="canUpdate" *ngIf="user" [activeUserId]="user.id"></app-edit-roles>
            </div>
            <div id="apps" class="tab-pane">
                <app-list-apps *ngIf="user" [activeUserId]="user.id"></app-list-apps>
            </div>
        </div>
    </div>
</div>

<app-modal #deleteModal [title]="'Delete User'" [message]="'Are you sure you want to delete this user?'" [iconClassList]="'fa fa-4x fa-trash text-danger margin-bottom'"
[buttons]="[{title: 'Confirm', classList: 'btn btn-danger'}]" (btnClicked)="deleteConfirmed($event)">
</app-modal>

<app-modal #enableModal [title]="'Enable User'" [message]="'Are you sure you want to enable this user and permit logins?'"
[iconClassList]="'fa-4x icon-success-color icon-enabled-no-click margin-bottom'" [buttons]="[{title: 'Confirm', classList: 'btn btn-success'}]"
(btnClicked)="enableConfirmed($event, true)">
</app-modal>

<app-modal #disableModal [title]="'Disable User'" [message]="'Are you sure you want to disable this user and revoke log-in privileges?'"
[iconClassList]="'fa-4x icon-warning-color icon-disabled-no-click margin-bottom'" [buttons]="[{title: 'Confirm', classList: 'btn btn-warning'}]"
(btnClicked)="enableConfirmed($event, false)">
</app-modal>
