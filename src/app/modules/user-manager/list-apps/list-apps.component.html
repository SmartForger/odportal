<h2>MicroApps</h2>
<table class="table">
  <thead>
    <tr>
      <th width="40">&nbsp;</th>
      <th>MicroApp</th>
      <th>Client</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let awp of apps">
      <tr [class.no-border]="awp.expanded" (click)="toggleRowOpen(awp)">
        <td class="position-relative" width="40">
          <mat-icon class="avatar">pages</mat-icon>
        </td>
        <td>
          <div class="title">
            {{ awp.app.appTitle }}
            <mat-icon *ngIf="!awp.expanded">keyboard_arrow_down</mat-icon>
            <mat-icon *ngIf="awp.expanded">keyboard_arrow_up</mat-icon>
          </div>
        </td>
        <td>
          {{awp.app.clientName}}
        </td>
        <td>
          <span *ngIf="awp.app.native" tooltip="Native Application" tooltip-position="top">Native</span>
          <span *ngIf="!awp.app.native" tooltip="3rd Party Application" tooltip-position="top">Third Party</span>
        </td>
      </tr>
      <tr *ngIf="awp.expanded">
        <td class="p-80" colspan="4" >
          <mat-chip-list *ngIf="!awp.loading && awp.permissions && awp.permissions.length > 0">
            <mat-chip
              *ngFor="let p of awp.permissions"
              class="opacity-half color-white"
              [ngClass]="{ 'bg-green': p.active, 'bg-red': !p.active }"
            >
              {{ p.name }}
            </mat-chip>
          </mat-chip-list>
          <span *ngIf="!awp.loading && (!awp.permissions || awp.permissions.length === 0)">
            No permissions
          </span>
          <span *ngIf="awp.loading">Loading ...</span>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>