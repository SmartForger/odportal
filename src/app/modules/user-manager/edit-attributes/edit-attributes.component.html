<div>
  <div class="icon-float-right" tooltip="Add New Attribute" tooltip-position="top"  (click)="add()">
    <button class="icon-add"></button>
  </div>
  <app-card-title [cardTitle]="'Edit Custom Attributes'" [cardSubtitle]="'Edit custom attributes below.'"></app-card-title>
</div>
<div class="row margin-bottom">
  <div class="col-lg-12">
    <div class="table table-emf table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>Key</th>
            <th>Value</th>
            <th *ngIf="canUpdate" class="text-center">Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let attr of attrs">
            <td>
              <a class="table-edit-hover" *ngIf="canUpdate" (click)="edit(attr)">
                <div>{{attr.display}}</div>
                <div class="icon-primary-color icon-edit"></div>
              </a>
              <span *ngIf="!canUpdate">{{attr.display}}</span>
            </td>

            <td class="text-field-in-table">
              <app-bind-text-input [(value)]="attr.value"></app-bind-text-input>
            </td>

            <td class="text-center" *ngIf="canUpdate">
              <a tooltip="Edit Attribute" tooltip-position="top" (click)="edit(attr)">
                <button class="icon-primary-color icon-edit"></button>
              </a>

              <a tooltip="Delete Attribute" tooltip-position="top"  (click)="remove(attr)">
                <button class="icon-trash"></button>
              </a>
            </td>
            
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div class="row" *ngIf="canUpdate">
  <div class="col-lg-12">
    <button class="btn-primary btn" type="button" (click)="update()">Save</button>
  </div>
</div>

<div class="modalDialog" [ngClass]="{'display-none': !showAdd}">
  <div class="modal-white-bg">
    <div class="widget-head">
      <div class="row">
        <div class="col-sm-9">
          <div class="widget-title">
            Add New Custom Attribute
          </div>
        </div>
        <div class="col-sm-3 text-right">
          <button class="disabledBtn"></button>
          <button class="disabledBtn"></button>
          <div tooltip="Close" tooltip-position="top">
            <button class="redCloseBtn" data-dismiss="modal" (click)="showAdd= false"></button>
          </div>
        </div>
      </div>
    </div>
    <div class="rmf-modal">
      <div class="rmf-modal-body">
        <div class="row">
          <div class="col-md-12">
            <app-custom-attribute-form #addAttrForm (formSubmitted)="addAttribute($event)"></app-custom-attribute-form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modalDialog" [ngClass]="{'display-none': !showEdit}">
  <div class="modal-white-bg">
    <div class="widget-head">
      <div class="row">
        <div class="col-sm-9">
          <div class="widget-title">
            Edit Custom Attribute
          </div>
        </div>
        <div class="col-sm-3 text-right">
          <button class="disabledBtn"></button>
          <button class="disabledBtn"></button>
          <div tooltip="Close" tooltip-position="top">
            <button class="redCloseBtn" data-dismiss="modal" (click)="showEdit= false"></button>
          </div>
        </div>
      </div>
    </div>
    <div class="rmf-modal">
      <div class="rmf-modal-body">
        <div class="row">
          <div class="col-md-12">
            <app-custom-attribute-form #editAttrForm (formSubmitted)="updateAttribute($event)"></app-custom-attribute-form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>