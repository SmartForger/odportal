<mat-grid-list cols="1" rowHeight="75px" class="mb-1">
    <mat-grid-tile>
        <h1 class="display-inline-block">
            Edit {{app.appTitle}}
        </h1>

        <span *ngIf="app && !app?.native">
            <button mat-mini-fab color="secondary" [matMenuTriggerFor]="menu2" *ngIf="canUpdate" class="ml-2">
                <mat-icon>more_vert</mat-icon>
            </button>
        </span>

        <mat-menu #menu2="matMenu">
            <button mat-menu-item *ngIf="!app?.approved && !app?.native && canUpdate" (click)="approveApp()">
              <mat-icon>done_outline</mat-icon>
              <span>Approve MicroApp</span>
            </button>

            <button mat-menu-item matTooltip="Test MicroApp" [routerLink]="['../../test', app.docId]" *ngIf="app && !app?.native">
              <mat-icon>build</mat-icon>
              <span>Test MicroApp</span>
            </button>

            <span *ngIf="(app?.approved || app?.native) && canUpdate">
                <button mat-menu-item matTooltip="Enable MicroApp" *ngIf="!app?.enabled" (click)="enableButtonClicked(true)">
                  <mat-icon>play_arrow</mat-icon>
                  <span>Enable MicroApp</span>
                </button>
            </span>

            <span *ngIf="app?.approved && !app?.native && canUpdate">
                <button mat-menu-item matTooltip="Disabled Trusted Mode" *ngIf="app?.trusted" (click)="disableTrusted()" >
                  <mat-icon class="color-red">done_outline</mat-icon>
                  <span>Set Trusted</span>
                </button>

                <button mat-menu-item matTooltip="Enable Trusted Mode" *ngIf="!app?.trusted" (click)="enableTrusted()">
                  <mat-icon class="color-green">done</mat-icon>
                  <span>Remove Trusted</span>
                </button>
            </span>

            <button mat-menu-item matTooltip="Delete MicroApp" (click)="removeApp()" *ngIf="!app?.native && canDelete">
              <mat-icon>delete</mat-icon>
              <span>Delete MicroApp</span>
            </button>
        </mat-menu>
    </mat-grid-tile>
</mat-grid-list>

<mat-tab-group class="content-body" *ngIf="app">

    <mat-tab label="Overview">
        <app-descriptor [app]="app"></app-descriptor>
    </mat-tab>

    <mat-tab label="Widgets">
        <app-widgets [app]="app"></app-widgets>
    </mat-tab>

    <mat-tab label="Client Permissions">
        <app-client-roles [clientId]="app.clientId" [clientName]="app.clientName"></app-client-roles>
    </mat-tab>

    <mat-tab label="Role Mappings">
        <app-role-mapper [app]="app" [canUpdate]="canUpdate"></app-role-mapper>
    </mat-tab>

<!--     <mat-tab label="Preview App">
        <app-micro-app-renderer [app]="app" [previewMode]="true"></app-micro-app-renderer>
    </mat-tab> -->

<!--     <mat-tab label="Preview Widgets">
        <app-widget-previewer [app]="app"></app-widget-previewer>
    </mat-tab> -->

</mat-tab-group>

<app-comments [vendorId]="app.vendorId" [appId]="app.docId" [isVendor]="false" *ngIf="!app.native"></app-comments>