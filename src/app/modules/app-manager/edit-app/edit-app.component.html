<h1>Edit {{app.appTitle}}</h1>

<mat-icon class="icon-float-right" tooltip="Delete Microapp" tooltip-position="top" (click)="removeApp()" *ngIf="!app?.native && canDelete">delete</mat-icon>

<div *ngIf="(app?.approved || app?.native) && canUpdate">
    <mat-icon class="icon-float-right" tooltip="Enable Microapp" tooltip-position="top" *ngIf="!app?.enabled" (click)="enableButtonClicked()">lock_open</mat-icon>
    
    <mat-icon class="icon-float-right" tooltip="Disable Microapp" tooltip-position="top" *ngIf="app?.enabled" (click)="disableButtonClicked()">lock</mat-icon>
</div>

<mat-icon class="icon-float-right" tooltip="Approve Microapp" tooltip-position="top" *ngIf="!app?.approved && !app?.native && canUpdate" (click)="approveApp()">done_outline</mat-icon>

<mat-tab-group class="content-body" *ngIf="app">

    <mat-tab label="MicroApp Information">
        <app-descriptor [app]="app"></app-descriptor>
    </mat-tab>

    <mat-tab label="Widgets">
        <app-widgets [app]="app"></app-widgets>
    </mat-tab>

    <mat-tab label="Client Permissions">
        <app-client-roles [clientId]="app.clientId" [clientName]="app.clientName"></app-client-roles>
    </mat-tab>

    <mat-tab label="Role Mappings">
        <app-role-mapper [app]="app" [canUpdate]="canUpdate"></app-role-mapper>
    </mat-tab>

    <mat-tab label="Preview App">
        <app-micro-app-renderer [app]="app" [previewMode]="true"></app-micro-app-renderer>
    </mat-tab>

    <mat-tab label="Preview Widgets">
        <app-widget-previewer [app]="app"></app-widget-previewer>
    </mat-tab>

</mat-tab-group>

<app-comments [vendorId]="app.vendorId" [appId]="app.docId" [isVendor]="false" *ngIf="!app.native"></app-comments>