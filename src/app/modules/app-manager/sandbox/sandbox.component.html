<mat-grid-list cols="1" rowHeight="75px" class="mb-1">
    <mat-grid-tile *ngIf='app'>
        <h1 class="display-inline-block mr-2">
            Test {{app.appTitle}}
        </h1>
        <span>
          <button mat-mini-fab color="secondary" [matMenuTriggerFor]="menu" class="mr-1">
            <mat-icon>more_vert</mat-icon>
          </button>

          <mat-menu #menu="matMenu">
            <span *ngIf="app">
                <button mat-menu-item matTooltip="Currently Trusted" (click)="app.trusted = !app.trusted" *ngIf="app.trusted">
                    <mat-icon class="color-green">security</mat-icon>
                    <span>Remove Trusted</span>
                </button>

                <button mat-menu-item matTooltip="Not Currently Trusted" (click)="app.trusted = !app.trusted" *ngIf="!app.trusted">
                    <mat-icon class="color-red">security</mat-icon>
                    <span>Assign Trusted</span>
                </button>
            </span>
            <button mat-menu-item matTooltip="Display Tools" (click)="showTools = !showTools" *ngIf="showTools">
                <mat-icon>extension</mat-icon>
                <span>Display Tools</span>
            </button>
            <button mat-menu-item matTooltip="Hide Tools" (click)="showTools = !showTools" *ngIf="!showTools">
                <mat-icon>extension</mat-icon>
                <span>Hide Tools</span>
            </button>
          </mat-menu>
        </span>
    </mat-grid-tile>
</mat-grid-list>

<mat-grid-list cols="4" rowHeight="600">
    <mat-grid-tile colspan="4" *ngIf="!showTools">
        <app-micro-app-renderer *ngIf="app" [app]="app"></app-micro-app-renderer>
    </mat-grid-tile>    
    <mat-grid-tile colspan="3" *ngIf="showTools">
        <app-micro-app-renderer *ngIf="app" [app]="app"></app-micro-app-renderer>
    </mat-grid-tile>

    <mat-grid-tile *ngIf="showTools">
        <mat-accordion>
          <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Responses
              </mat-panel-title>
              <mat-panel-description class="flex-reverse">
                <mat-icon>code</mat-icon>
              </mat-panel-description>
            </mat-expansion-panel-header>

            <p>
                <app-sandbox-http-request-tracker *ngIf="app" [app]="app"></app-sandbox-http-request-tracker>
            </p>
          </mat-expansion-panel>

          <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Widgets
              </mat-panel-title>
              <mat-panel-description class="flex-reverse">
                <mat-icon>widgets</mat-icon>
              </mat-panel-description>
            </mat-expansion-panel-header>

            <p>
                <app-sandbox-widget-list [app]="app"></app-sandbox-widget-list>
            </p>
          </mat-expansion-panel>

          <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Discussion
              </mat-panel-title>
              <mat-panel-description class="flex-reverse">
                <mat-icon>chat_bubble_outline</mat-icon>
              </mat-panel-description>
            </mat-expansion-panel-header>

            <p>
                <app-comments *ngIf="app" [vendorId]="app.vendorId" [appId]="app.docId" [isVendor]="false"></app-comments>
            </p>
          </mat-expansion-panel>
        </mat-accordion>

    </mat-grid-tile>
</mat-grid-list>