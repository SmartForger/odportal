<div class="table-container">

  <app-listview-toolbar
    (refresh)="listItems()"
    (search)="search($event)"
    searchPlaceholder="Search microapplications"
    [showCreateButton]="false"
  >
  </app-listview-toolbar>


  <table mat-table [dataSource]="items" class="table" matSort matSortActive="appTitle" matSortDisableClear
    matSortDirection="asc">

    <ng-container matColumnDef="appTitle">
      <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Application</th>
      <td mat-cell *matCellDef="let app">
        <a [routerLink]="['../edit/', app.docId]">
          <mat-icon *ngIf="app.enabled" class="avatar status-green float-left" style="margin-top:-7px;" matTooltip="App enabled">pages</mat-icon>
          <mat-icon *ngIf="!app.enabled" class="avatar status-red float-left" style="margin-top:-7px;" matTooltip="App disabled">pages</mat-icon>
          <span>{{app.appTitle}}</span>
        </a>
      </td>
    </ng-container>

    <ng-container matColumnDef="clientName">
      <th mat-header-cell *matHeaderCellDef>Client</th>
      <td mat-cell *matCellDef="let app">
        <div *ngIf="app.clientName" class="faux-chip monospace opacity-twothird mx-0 size-12">{{app.clientName}}</div>
        <div *ngIf="!app.clientName" class="monospace opacity-half mx-0 size-12">Unavailable</div>
      </td>
    </ng-container>

    <ng-container matColumnDef="widgets">
      <th mat-header-cell *matHeaderCellDef class="text-center pr-1">Widgets</th>
      <td mat-cell *matCellDef="let app" class="text-center pr-1">
        {{app.widgets.length}} <mat-icon class="sm-icon opacity-half">widgets</mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef class="text-left">Status</th>
      <td mat-cell *matCellDef="let app" class="text-left">
        <mat-chip *ngIf="app.enabled" class="status-green bold-400">Active</mat-chip>
        <mat-chip *ngIf="!app.enabled" class="status-red bold-400">Disabled</mat-chip>
      </td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef class="text-right">&nbsp;</th>
      <td mat-cell *matCellDef="let app" class="text-right">
        <button mat-icon-button [routerLink]="['../edit/', app.docId]" matTooltip="Edit App">
          <mat-icon>edit</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row: columns: displayedColumns"></tr>

  </table>
  <mat-paginator [pageSize]="50" showFirstLastButtons></mat-paginator>
</div>