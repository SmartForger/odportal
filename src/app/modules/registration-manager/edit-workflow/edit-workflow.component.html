<app-page-title
    [pageTitle]="'Edit workflow'"
    [backLink]="['../../']"
></app-page-title>

<div *ngIf='workflow' class="wrapper">
    <div class="table-container">
        <div class="title">Workflow Details</div>

        <div fxLayout="row" fxLayoutGap="50px">
            <div fxFlex="33%">
                <mat-form-field class="ng-text-field">
                    <input
                        #name
                        matInput
                        placeholder="Workflow Name"
                        value="{{ workflow.title }}"
                    />
                </mat-form-field>
                <div>
                    <div class="label">Autoapprove</div>
                    <div fxLayout="row" fxLayoutAlign="start center">
                        <mat-checkbox #autoapprove color="primary" [checked]='workflow.autoapprove' (change)='ensureAutoapprove($event)'>Enabled</mat-checkbox>
                        <mat-icon class="ml-1 opacity-half mat-icon-small" matTooltip="Automatically approve users and allow them access to the system when their registration is 100% complete.">help</mat-icon>
                    </div>
                </div>
            </div>
            <div fxFlex>
                <div class="label" fxLayout="row" fxLayoutAlign="start center">
                    <div>Autoassign Roles</div>
                    <mat-icon class="ml-1 opacity-half mat-icon-small" matTooltip="When a user receives final approval, automatically allocate the following roles to them.">help</mat-icon>
                </div>
                <div gdColumns="1fr 1fr" gdGap="10px 20px">
                    <app-role-block *ngFor='let role of roles' [active]='isActive(role)' [name]='role.name' (status)='setRoleStatus(role.name, $event)'></app-role-block>
                    <!-- <app-role-block name="White Cell" [active]="true"></app-role-block>
                    <app-role-block name="User Administrator"></app-role-block>
                    <app-role-block name="Administrator"></app-role-block> -->
                </div>
            </div>
        </div>

        <div class="mt-3 save-btn">
            <!-- <button mat-button class="opacity-half mr-1">Cancel</button> -->
            <button mat-raised-button color="primary" (click)='save()'>Save Changes</button>
        </div>
    </div>
</div>
