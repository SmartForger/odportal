<mat-grid-list cols="1" rowHeight="65px" class="mb-1">
  <mat-grid-tile>
    <h1 *ngIf="userRegistration">Review {{this.userRegistration.userProfile.firstName}} {{this.userRegistration.userProfile.lastName}}</h1>
  </mat-grid-tile>
</mat-grid-list>
<mat-tab-group 
  class="content-body" 
  (selectedIndexChange)="onSelectedIndexChange($event)"
>
  <mat-tab [label]="'Overview'" *ngIf="userRegistration">
    <div class="content-body-interior">
      <app-registration-overview
        [userRegistration]="userRegistration"
        (goToStep)="goToStep($event)"
        (goToForm)="goToForm($event)"
      ></app-registration-overview>
    </div>
  </mat-tab>

  <ng-container *ngIf="userRegistration">
    <mat-tab *ngFor="let step of userRegistration.steps; index as i" [label]="step.title">
        <div class="content-body-interior">
          <h2>{{step.title}}</h2>
          <p>{{step.description}}</p>

          <app-form-card 
            *ngIf="step.forms.length > 0 || step.forms[0].approvals.length > 0" 
            [forms]=step.forms 
            [formIndex]="formIndex"
            (formSelected)="formIndex = $event"
          ></app-form-card>

          <app-dynamic-form 
            [regId]="userRegistration.docId"
            [data]="step.forms[formIndex]"
            [bindingRegistry]="userRegistration.bindingRegistry"
            [displayApprovals]="true"
            (formSubmitted)="onSubmit(i, formIndex, $event)"
          ></app-dynamic-form>
        </div>
      </mat-tab>
  </ng-container>

  <mat-tab [label]="'Final Approval'" [disabled]="!allStepsComplete" *ngIf="userRegistration">
    <h2>Final Approval for Application</h2>
    <button type="button">Approve</button>
  </mat-tab>
</mat-tab-group>