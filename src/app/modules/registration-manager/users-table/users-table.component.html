<app-string-with-dropdown-filter
  [labelText]="'Search by Name, Username or Email'"
  [placeholderText]="''"
  [dropdownLabelText]="'Filter by Role'"
  [dropdownGen]="injectable"
  [selectedItem]="activeRoleName"
  (searchUpdated)="searchUpdated($event)">
</app-string-with-dropdown-filter>

<table class="full-width table" mat-table [dataSource]="users">
  <!-- Online Status Column -->
  <ng-container matColumnDef="online">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td mat-cell class="online-status-col" width="50" *matCellDef="let user">
      <mat-icon class="avatar">person</mat-icon>
      <div class="mark">
        <span matTooltip="Registration Open">
          <mat-icon class="color-yellow">brightness_1</mat-icon>
        </span>
        <!-- <span *ngIf="!user.enabled" matTooltip="Registration Closed">
          <mat-icon class="color-red">brightness_1</mat-icon>
        </span> -->
      </div>
    </td>
  </ng-container>

  <!-- User Column -->
  <ng-container matColumnDef="username">
    <th mat-header-cell *matHeaderCellDef>User</th>
    <td mat-cell *matCellDef="let user">
      <a [routerLink]="'/portal/registration/users/' + user.id">
        {{ user.username }}
      </a>
    </td>
  </ng-container>

  <!-- Full Name Column -->
  <ng-container matColumnDef="fullname">
    <th mat-header-cell *matHeaderCellDef>Full Name</th>
    <td mat-cell *matCellDef="let user">{{ user.fullname }}</td>
  </ng-container>

  <!-- Email Column -->
  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef>Email</th>
    <td mat-cell *matCellDef="let user">{{ user.email }}</td>
  </ng-container>

  <!-- Role Column -->
  <ng-container matColumnDef="role">
    <th mat-header-cell *matHeaderCellDef>Role</th>
    <td mat-cell *matCellDef="let user">{{ user.role }}</td>
  </ng-container>

  <!-- Created Date Column -->
  <ng-container matColumnDef="created">
    <th mat-header-cell *matHeaderCellDef>Submitted</th>
    <td mat-cell *matCellDef="let user">{{ user.created | date: 'short' }}</td>
  </ng-container>

  <!-- Status Column -->
  <!-- <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td mat-cell *matCellDef="let user">{{ user.status }}</td>
  </ng-container> -->

  <!-- Action Column -->
  <ng-container matColumnDef="action">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let user" class="text-right">
      <button
        mat-icon-button
        [routerLink]="'/portal/registration/users/' + user.id"
      >
        <mat-icon matTooltip="Details">visibility</mat-icon>
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
