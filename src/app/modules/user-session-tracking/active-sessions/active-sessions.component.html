<h2>Active Sessions</h2>

<app-active-sessions-filter
  [ipAddresses]="ipAddresses"
  [clients]="clients"
  [users]="users"
  (filterChange)="filterSessions($event)"
></app-active-sessions-filter>

<table class="full-width table" mat-table [dataSource]="pagedSessions">
  <ng-container matColumnDef="user">
    <th mat-header-cell *matHeaderCellDef>User</th>
    <td mat-cell *matCellDef="let session">
      <a [href]="'/portal/user-manager/edit/' + session.userId">
        {{ session.username }}
      </a>
    </td>
  </ng-container>

  <ng-container matColumnDef="client">
    <th mat-header-cell *matHeaderCellDef>Client</th>
    <td mat-cell *matCellDef="let session">{{ session.clientId }}</td>
  </ng-container>

  <ng-container matColumnDef="ipAddress">
    <th mat-header-cell *matHeaderCellDef>IP Address</th>
    <td mat-cell *matCellDef="let session">{{ session.ipAddress }}</td>
  </ng-container>

  <ng-container matColumnDef="start">
    <th mat-header-cell *matHeaderCellDef>Start</th>
    <td mat-cell *matCellDef="let session">
      {{ session.start | date: "short" }}
    </td>
  </ng-container>

  <ng-container matColumnDef="lastAccess">
    <th mat-header-cell *matHeaderCellDef>Last Access</th>
    <td mat-cell *matCellDef="let session">
      {{ session.lastAccess | date: "short" }}
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>

<div class="warning-message" *ngIf="userSessions.length === 0">
  No sessions.
</div>

<mat-paginator
  [length]="filteredSessions.length"
  [pageIndex]="page"
  [pageSize]="pageSize"
  [pageSizeOptions]="[1, 2, 25, 100]"
  (page)="paginate($event)"
></mat-paginator>
