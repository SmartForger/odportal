<app-card-title [cardTitle]="'MicroApp Information and Status'"></app-card-title>

<div class="grey-bg-rmf">
  <div class="row">
    <div class="col-lg-4" *ngIf="!app.native">
      <div class="card status-card text-center" *ngIf="!app.approved">
        <div class="border-top-radius bg-warning">
          <span class="icon-disabled"></span>
        </div>
        <div class="card-body">
          <div class="section-title text-warning">Not Approved</div>
          <p class="card-text text-warning">Status</p>
        </div>
      </div>
      <div class="card status-card text-center" *ngIf="app.approved">
        <div class="border-top-radius bg-success">
          <span class="icon-enabled"></span>
        </div>
        <div class="card-body">
          <div class="section-title text-success">Approved</div>
          <p class="card-text text-success">Status</p>
        </div>
      </div>
    </div>
    <div [ngClass]="{'col-lg-8': !app.native, 'col-lg-12': app.native}">
      <div class="section-title">{{app.appTitle}}</div>
      <small *ngIf="!app.native">
        Version: <strong>{{app.version}}</strong> Uploaded: <strong>{{app.createdAt | date:'yyyy-MM-dd HH:mm'}}</strong>
      </small>
      <hr>
      <p class="card-text">
        Client: <strong>{{app.clientName}}</strong>
      </p>
      <p class="card-text">
        Client ID: <strong>{{app.clientId}}</strong>
      </p>
      <p class="card-text" *ngIf="!app.native">
        Custom Element Tag: <strong>{{app.appTag}}</strong>
      </p>
      <p class="card-text" *ngIf="!app.native">
        Bootstrapper Module: <strong>{{app.appBootstrap}}</strong>
      </p>
    </div>
  </div>
</div>

<div *ngIf="!app.native">
  <div class="margin-top-lg">
    <app-card-title [cardTitle]="'External Permissions Requested'"
      [cardSubtitle]="'Below is a list of external permission requested.'"></app-card-title>
  </div>

  <div class="table table-emf table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>Client</th>
          <th>Client ID</th>
          <th class="text-center">Requested<br>'Read'</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let ep of app.externalPermissions">
          <td>
            {{ep.clientName}}
          </td>
          <td>
            {{ep.clientId}}
          </td>
          <td class="text-center">
            {{ep.readPermission}}
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="margin-top-lg">
    <app-card-title [cardTitle]="'Declared API Calls'"
      [cardSubtitle]="'Below is a list of API calls declared in the Manifest.'"></app-card-title>
  </div>

  <div class="table table-emf table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>Method</th>
          <th>URI</th>
          <th class="text-center">Required<br>Trusted App</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let item of app.apiCalls">
          <td>
            {{item.verb}}
          </td>
          <td>
            {{item.url}}
          </td>
          <td class="text-center">
            <i class="fa fa-check text-success" *ngIf="item.requiresTrusted"></i>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>