<h2>Role Mappings</h2>
<table class="table">
  <thead>
    <tr>
      <th>Role</th>
      <th>Client</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let rwp of rwps">
      <tr [class.no-border]="rwp.expanded" (click)="toggleRowOpen(rwp)">
        <td>
          <div class="title">
            {{ rwp.role.name }}
            <mat-icon *ngIf="!rwp.expanded">keyboard_arrow_down</mat-icon>
            <mat-icon *ngIf="rwp.expanded">keyboard_arrow_up</mat-icon>
          </div>
        </td>
        <td>
          {{clientName}}
        </td>
      </tr>
      <tr *ngIf="rwp.expanded">
        <td class="p-80" colspan="4">
          <mat-chip-list *ngIf="!rwp.loading && rwp.permissions && rwp.permissions.length > 0">
            <mat-chip
              *ngFor="let p of rwp.permissions"
              class="opacity-half color-white"
              [ngClass]="{ 'bg-green': p.active, 'bg-red': !p.active }"
            >
              {{ p.name }}
            </mat-chip>
          </mat-chip-list>
          <span *ngIf="!rwp.loading && (!rwp.permissions || rwp.permissions.length === 0)">
            No permissions
          </span>
          <span *ngIf="rwp.loading">Loading ...</span>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>