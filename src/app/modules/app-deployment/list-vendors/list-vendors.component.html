<div class="header-new pb-2">
  <h1>MicroApp Deployment</h1>
</div>
<div class="wrapper">

  <div class="table-container">
    <app-listview-toolbar
      (refresh)="listItems()"
      (search)="applyFilter('name', $event)"
      searchPlaceholder="Search vendors"
      [showCreateButton]="false"
    ></app-listview-toolbar>
      
    <table
      mat-table
      [dataSource]="items"
      class="table"
      matSort
      matSortActive="name"
      matSortDirection="asc"
      matSortDisableClear
    >

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Vendor</th>
        <td mat-cell *matCellDef="let vendor">
          <a [routerLink]="['../apps', vendor.docId]" matTooltip="Edit Vendor">
            <mat-icon class="avatar float-left" style="margin-top:-7px;">domain</mat-icon>
            <span>{{vendor.name}}</span>
          </a>
        </td>
      </ng-container>

      <ng-container matColumnDef="phone">
        <th mat-header-cell *matHeaderCellDef>Phone</th>
        <td mat-cell *matCellDef="let vendor">
          <span *ngIf="vendor.pocPhone">{{vendor.pocPhone}}</span>
          <span *ngIf="!vendor.pocPhone" class="opacity-half">N/A</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let vendor">
          <span *ngIf="vendor.pocEmail">{{vendor.pocEmail}}</span>
          <span *ngIf="!vendor.pocEmail" class="opacity-half">N/A</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="users">
        <th mat-header-cell *matHeaderCellDef class="text-center">Users</th>
        <td mat-cell *matCellDef="let vendor" class="text-center">{{vendor.users.length}} <mat-icon
            class="sm-icon opacity-half">person</mat-icon>
        </td>
      </ng-container>

      <ng-container matColumnDef="created">
        <th mat-header-cell *matHeaderCellDef class="text-right">Created</th>
        <td mat-cell *matCellDef="let vendor" class="text-right">
          {{vendor.createdAt | date:'MM-dd-yyyy'}}
          <!-- {{vendor.createdAt | date:'HH:mm on MM-dd-yyyy'}} -->
          <span *ngIf="!vendor.createdAt">12-15-2018</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>&nbsp;</th>
        <td mat-cell *matCellDef="let vendor" class="text-right">
          <button mat-icon-button [routerLink]="['../apps', vendor.docId]" matTooltip="Edit Vendor">
            <mat-icon>edit</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row: columns: displayedColumns"></tr>

    </table>

    <div class="pagination">
      <span>{{ totalVendors }}</span>
      <mat-paginator
        [pageSizeOptions]="[10, 25, 50, 100]"
        [pageSize]="10"
        showFirstLastButtons
      ></mat-paginator>
    </div>
  </div>
</div>