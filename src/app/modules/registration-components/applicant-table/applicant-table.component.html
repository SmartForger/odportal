<table *ngIf='summaries.length > 0' class="full-width table mb-4" mat-table [dataSource]="summaries">

    <ng-container matColumnDef='user-details'>
        <th mat-header-cell *matHeaderCellDef colspan='4' class='header user-details-header'>User Details</th>
    </ng-container>

    <ng-container matColumnDef='registration-details'>
        <th mat-header-cell *matHeaderCellDef colspan='3' class='header registration-details-header'>Registration Details</th>
    </ng-container>

    <ng-container *ngFor='let column of columns' >
        <ng-container *ngIf='column.columnGroup === 0'>
            <ng-container *ngFor='let key of listSubheaders(column)' matColumnDef='{{ key }}'>
                <th mat-header-cell *matHeaderCellDef class='subheader'>{{ key }}</th>
            </ng-container>
        </ng-container>

        <ng-container *ngIf='column.columnGroup > 0' >
        </ng-container>

        <!-- TEXT VALUES -->
        <ng-container *ngIf='column.bindingType === 0' matColumnDef='{{ column.binding }}'>
            <th mat-header-cell *matHeaderCellDef [ngClass]='subheader'>{{ column.title }}</th>
            <td mat-cell *matCellDef='let summary'>{{ summary[column.binding] }}</td>
        </ng-container>

        <!-- BOOLEAN VALUES -->
        <ng-container *ngIf='column.bindingType === 1' >
            <td mat-cell *matCellDef='let summary'>{{ summary[column.binding] }}</td>
        </ng-container>

        <!-- RADIO VALUES -->
        <ng-container *ngIf='column.bindingType === 2' >
            <td mat-cell *matCellDef='let summary'>{{ summary[column.binding] }}</td>
        </ng-container>

        <!-- LIST VALUES -->
        <ng-container *ngIf='column.bindingType === 3' >
            <td mat-cell *matCellDef='let summary'>hoopla</td>
        </ng-container>

        <!-- ENUM VALUES -->
        <ng-container *ngIf='column.bindingType === 4' >
            <td mat-cell *matCellDef='let summary'>{{ summary[column.binding] }}</td>
        </ng-container>

        <!-- PROGRESS VALUES -->
        <ng-container *ngIf='column.bindingType === 5' >
            <td mat-cell *matCellDef='let summary'>{{ summary[column.binding] }}</td>
        </ng-container>

        <!-- ICON VALUES -->
        <ng-container *ngIf='column.bindingType === 6' >
            <td mat-cell *matCellDef='let summary'>{{ summary[column.binding] }}</td>
        </ng-container>

    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['user-details', 'registration-details']"></tr>
    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay"></tr>
</table>

<table *ngIf='users.length > 0 || (users.length === 0 && summaries.length === 0)' class="full-width table mb-4" mat-table [dataSource]="users">

    <!-- Online Status Column -->
    <ng-container matColumnDef="online">
        <th mat-header-cell *matHeaderCellDef>&nbsp;</th>
        <td mat-cell class="online-status-col" width="50" *matCellDef="let summary" class="pr-1">
            <mat-icon class="avatar">person</mat-icon>
        </td>
    </ng-container>

    <!-- User Column -->
    <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef>Username</th>
        <td mat-cell *matCellDef="let summary" (click)="userSelected.emit(summary)" class="cursor-pointer" matTooltip="Review {{summary.userProfile.username}}">
            <span>{{ summary.userProfile.username }}</span>
        </td>
    </ng-container>

    <!-- Full Name Column -->
    <ng-container matColumnDef="fullname">
        <th mat-header-cell *matHeaderCellDef>Full Name</th>
        <td mat-cell *matCellDef="let summary">
            <span *ngIf="summary.userProfile.firstName || summary.userProfile.lastName">{{summary.userProfile.firstName}} {{summary.userProfile.lastName}}</span>
            <span *ngIf="!summary.userProfile.firstName && !summary.userProfile.lastName" class="opacity-half">
                <em>Not Provided</em>
            </span>
        </td>
    </ng-container>

    <!-- Email Column -->
    <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let summary">{{ summary.userProfile.email }}</td>
    </ng-container>

    <!-- Action Column -->
    <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let summary" class="text-right">
            <button mat-icon-button (click)="userSelected.emit(summary)" class="opacity-half">
                <mat-icon matTooltip="Review {{summary.userProfile.username}}">visibility</mat-icon>
            </button>
        </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="userColumnsToDisplay"></tr>
    <tr mat-row *matRowDef="let row; columns: userColumnsToDisplay"></tr>
</table>