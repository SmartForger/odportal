<table class="full-width table mb-4" mat-table [dataSource]="summaries">

    <ng-container matColumnDef='user-details'>
        <th mat-header-cell *matHeaderCellDef colspan='4' class='user-details-header'>User Details</th>
    </ng-container>

    <ng-container matColumnDef='registration-details'>
        <th mat-header-cell *matHeaderCellDef colspan='3' class='registration-details-header'>Registration Details</th>
    </ng-container>

    <!-- Online Status Column -->
    <ng-container matColumnDef="online">
        <th mat-header-cell *matHeaderCellDef>&nbsp;</th>
        <td mat-cell class="online-status-col" width="50" *matCellDef="let summary" class="pr-1">
            <mat-icon class="avatar">person</mat-icon>
        </td>
    </ng-container>

    <!-- User Column -->
    <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef>Username</th>
        <td mat-cell *matCellDef="let summary" (click)="userSelected.emit(summary)" class="cursor-pointer" matTooltip="Review {{summary.userProfile.username}}">
            <span>{{ summary.userProfile.username }}</span>
        </td>
    </ng-container>

    <!-- Full Name Column -->
    <ng-container matColumnDef="fullname">
        <th mat-header-cell *matHeaderCellDef>Full Name</th>
        <td mat-cell *matCellDef="let summary">
            <span *ngIf="summary.userProfile.firstName || summary.userProfile.lastName">{{summary.userProfile.firstName}} {{summary.userProfile.lastName}}</span>
            <span *ngIf="!summary.userProfile.firstName && !summary.userProfile.lastName" class="opacity-half">
                <em>Not Provided</em>
            </span>
        </td>
    </ng-container>

    <!-- Email Column -->
    <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let summary">{{ summary.userProfile.email }}</td>
    </ng-container>

    <!-- Classification Column -->
    <ng-container matColumnDef="classification">
        <th mat-header-cell *matHeaderCellDef>Classification</th>
        <td mat-cell *matCellDef="let summary">{{ summary.registrationTitle }}</td>
    </ng-container>

    <!-- Status Column -->
    <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let summary">{{ parseStatus(summary.status) }}</td>
    </ng-container>

    <!-- Action Column -->
    <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let summary" class="text-right">
            <button mat-icon-button (click)="userSelected.emit(summary)" class="opacity-half">
                <mat-icon matTooltip="Review {{summary.userProfile.username}}">visibility</mat-icon>
            </button>
        </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['user-details', 'registration-details']"></tr>
    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay"></tr>
</table>